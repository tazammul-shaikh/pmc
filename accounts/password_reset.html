{% extends 'accounts/account_template.html' %}
{% block title %}Set New Password{% endblock %}
{% block area %}
    <h5 class="color-secondary font-bold mt-24">
        <span class="font-size-2rem" style="line-height: 2.5rem;">Verify Mobile Number</span>
    </h5>
    <form method="POST" id="reset-password-form" action="{% url "accounts:password_reset" %}" class="tz-account-form form-error" errortext="{{ form.non_field_errors.0 }}" onsubmit="return validateResetPassword()">
        <div class ="tz-form-error"><i class="fas fa-exclamation-circle"></i><span></span></div>
        {% csrf_token %}
        <div class="mb-16">
            <div class="mb-8">Otp has been sent to you on <span style="font-weight: bold">+91{{ request.session.session_user_phone }}</span>.<br>Please enter it below.</div>
            <div class="mb-8">
                <input type="number" name="otp" id="otp" errortext="{{ form.otp.errors.0 }}" class="browser-default tz-account-input" required/>
            </div>
            <div class = "tz-input-error"><i class="fas fa-exclamation-circle"></i><span></span></div> 

            <div class="text-right">
                <span class="color-primary" style="display: none" id="resent_message">OTP resent!</span>
                <div id="resent_option">
                    Did'nt get the OTP? <a href="#" onclick="resendOTP();" class="link">Resend OTP</a>
                    <i class="fa fa-spinner fa-spin" style="font-size: 24px; display: none" id="form_loader"></i>
                </div>
            </div>
        </div>
        <div id="password-block" class="tz-form-group">
            <div class="tz-form-label" id="password-label">Create New Password</div>
            <div  class="tz-relative">
                <input type="password" name="password1" id="reset-password1" errortext="{{ form.password1.errors.0 }}" class="browser-default tz-account-input tz-password-input" required/>
                <span class="tz-psswdicon-pos showPassword"><i class="fas fa-eye-slash font-size-20"></i></span>
            </div>
            <div class="tz-input-error"><i class="fas fa-exclamation-circle"></i><span></span></div>
        </div>
        <div id="password-block" class="tz-form-group" >
            <div class="tz-form-label" id="password-label">Confirm Password</div>
            <div  class="tz-relative">
                <input class="browser-default tz-account-input tz-password-input" errortext="{{ form.password2.errors.0 }}" type="password" name="password2" id="reset-password2"/>
                <span class="tz-psswdicon-pos showPassword"><i class="fas fa-eye-slash font-size-20"></i></span>
            </div>
            <div  class = "tz-input-error"><i class="fas fa-exclamation-circle"></i><span></span></div>
        </div>
        <div class="tz-account-btn-sec"><button class="btn waves-effect tz-account-btn" type="submit">Reset Password</button></div>
    </form>
    <div class="tz-bottom-link-section">
        <span>Go back to </span><a href="{% url "accounts:login" %}" class="link">Login</a>
    </div>
{% endblock %}
{% block custom_script_below %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
{% endblock %}
